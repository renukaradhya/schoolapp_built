function error(a){console.log(a.status)}function goToHome(){$(".sidebar-menu #space a").trigger("click")}var ad_login_app=angular.module("ad_login_app",["blockUI","config_app","ngRoute","ngResource"]);ad_login_app.config(["$locationProvider","blockUIConfig",function(a,b){a.html5Mode({enabled:!0,requireBase:!0}),b.message="Logging In ..."}]),ad_login_app.factory("adminloginFactory",["$resource","admin_config",function(a,b){var c={},d=b.getLoginApi();return c.getLogin=function(b){return a(d+"/"+b,{},{login:{method:"POST",headers:{"Content-Type":"application/json"},interceptor:{response:function(a){return a}}}})},c}]),ad_login_app.controller("adminloginController",["$scope","adminloginFactory","$window",function(a,b,c){a.username="",a.password="",a.adminLogin=function(){var d='{"userName":"'+a.username+'","password":"'+a.password+'"}';b.getLogin(a.login_as).login({},d,function(a){if(200==a.status){a.data;c.sessionStorage.setItem("loggedin",!0),c.location="ad_main.html"}},function(b){console.log(b),0==b.status?c.location="system_error.html":a.$parent.$parent.response_message=b.data})},a.clearErrorMsg=function(){a.$parent.$parent.response_message=""}}]);var appAdmin=angular.module("appAdmin",["ui.bootstrap","blockUI","slimScrollDirective","highcharts-ng","angularUtils.directives.dirPagination","config_app","ui.bootstrap","ad_login_app","checklist-model","ui.router","ngRoute","ngResource"]);appAdmin.factory("addFactory",["$resource","admin_config","$window",function(a,b,c){var d={},e=b.getBaseUrl(),f=c.localStorage.getItem("authCode");return d.fetchOrganizationList=function(){return a(e+"org",{},{fetch:{method:"get",isArray:!0,interceptor:{response:function(a){return a}}}})},d.createOrgnization=function(){return a(e+"org",{},{add:{method:"POST",headers:{"Content-Type":"application/json"},interceptor:{response:function(a){return a}}}})},d.validateUsername=function(b,c){return a(e+"org/"+b+"/userName/"+c,{},{fetch:{method:"get",isArray:!1,headers:{Authorization:f},interceptor:{response:function(a){return a}}}})},d.listAdmins=function(){return a(e+"org/adminInfo",{},{fetch:{method:"get",isArray:!0,interceptor:{response:function(a){return a}}}})},d.createAdmin=function(b){return a(e+"org/"+b+"/admin",{},{add:{method:"POST",headers:{"Content-Type":"application/json"},interceptor:{response:function(a){return a}}}})},d}]),appAdmin.run([function(){$(function(){$(document).keydown(function(a){return 116==(a.which||a.keyCode)||82==a.keyCode&&a.ctrlKey?void a.preventDefault():116!=(a.which||a.keyCode)})})}]),appAdmin.controller("adminController",["$scope","$location","admin_config","$window",function(a,b,c,d){function e(){b.path("/orglist.list")}var f=c.setConfig();f?e():(d.location="index.html",a.$parent.response_message="Please try after some time")}]),appAdmin.controller("orgController",["$scope","addFactory","$state","$timeout","$window",function(a,b,c,d,e){var f={orgName:"",address:"",pincode:"",userName:"",password:"",firstName:"",lastName:"",email:"",phoneNumber:"",type:"",boardOfEducation:"",recognizedBy:"",affiliationNumber:"",faxNumber:""};a.bg_list=["A +ve","A -ve","B +ve","B -ve","AB +ve","AB -ve","O +ve","O -ve"],a.todaydate=new Date;b.fetchOrganizationList().fetch({},function(b){if(a.organization_list=[],a.todaydate=new Date,200==b.status||201==b.status){var d=angular.fromJson(b.data);a.organization_list=d,c.go("orglist.list")}},error);a.setBaseContentHeight=function(a){a>10?($(".base-content").css({height:"100%"}),$(".slim-content").slimScroll({height:"95%",alwaysVisible:!1,size:"3px"}).css("width","100%"),$(".table-base .slimScrollDiv").css("min-width","660px")):($(".base-content").height("auto"),$(".slim-content").slimScroll({destroy:!0}))},a.fetchOrgList=function(){b.fetchOrganizationList().fetch({},function(b){if(a.organization_list=[],a.todaydate=new Date,200==b.status){var c=angular.fromJson(b.data);a.organization_list=c}},error)},a.createOrg=function(){a.response_msg="",a.response_msg1="",a.add=angular.copy(f),a.add.gender="Male"},a.createOrgnization=function(){var d=a.add,e=' { "orgName":"'+d.orgName+'","address" :"'+d.address+'","pincode" :"'+d.pincode+'","boardOfEducation" :"'+d.boardOfEducation+'","recognizedBy" :"'+d.recognizedBy+'","faxNumber" :"'+d.faxNumber+'","affiliationNumber" :"'+d.affiliationNumber+'"}',f=b.createOrgnization();f.add({},e,function(b){200!=b.status&&201!=b.status||(a.response_msg="Organization created successfully !!!",c.go("orglist.list"))},function(b){a.response_msg1=b.data.errorMessage,409==b.status?a.response_msg1="Creating organization unsuccessful !!!":404==b.status?a.response_msg1=b.data.errorMessage:a.response_msg1="Creating organization unsuccessful !!!"})},a.listAdmins=function(){a.response_msg="",b.listAdmins().fetch({},function(b){if(a.admin_list=[],console.log(b),200==b.status&&void 0!=b.data){var c=angular.fromJson(b.data);a.admin_list=c,a.$parent.setBaseContentHeight(a.admin_list.length)}},function(b){a.admin_list=[],a.$parent.setBaseContentHeight(-1),console.log(b.status)})},a.validateUsername=function(c,d){if(void 0!=orgId){var e=window.btoa(d),f=window.btoa(c);b.validateUsername(f,e).fetch({},function(b){200!=b.status&&201!=b.status||(a.availability="Available !!")},function(b){a.availability=b.data.errorMessage})}else a.availability="Please select the Organization Id."},a.addAdmin=function(){a.response_msg="",a.response_msg1="",a.org_list=a.organization_list,a.add=angular.copy(f),a.add.gender="Male"},a.createAdmin=function(d){var e=a.add,f=' { "userName":"'+e.userName+'","password" :"'+e.password+'","firstName":"'+e.firstName+'","lastName" :"'+e.lastName+'","gender" :"'+e.gender+'","blood" :"'+e.blood+'","emails":[{"email" :"'+e.email+'","type" :"'+e.type+'"}],"phoneNumbers":[{"phoneNumber" :"'+e.phoneNumber+'","type" :"'+e.type+'"}]}';console.log(d);var g=b.createAdmin(d);g.add({},f,function(b){200!=b.status&&201!=b.status||a.listAdmins(),c.go("^.adminlist"),a.response_msg="Organization Admin added successfully !!!"},function(b){409==b.status?a.response_msg1=b.data:a.response_msg1="Addition of Organization Admin is unsuccessful !!!"})},a.orgDetails={organization_list:[],numPerPage:25,currentPage:1,startValue:0},a.pageChanged=function(){a.orgDetails.startValue=(a.orgDetails.currentPage-1)*a.orgDetails.numPerPage,a.fetchFacultyList(a.orgDetails.startValue,a.orgDetails.numPerPage)},a.cancel=function(){a.response_msg="",a.response_msg1="",c.go("^.list")},c.go("orglist.list")}]),appAdmin.config(["$stateProvider","$urlRouterProvider","$routeProvider","$locationProvider","blockUIConfig",function(a,b,c,d,e){b.otherwise("/#"),a.state("orglist",{url:"/orglist",template:'<div ui-view style="height:100%"></div>',controller:"orgController"}).state("orglist.list",{url:"",templateUrl:"views/admin/ad_orglist.html"}).state("orglist.add",{url:"",templateUrl:"views/admin/ad_addOrg.html"}).state("orglist.admin",{url:"",templateUrl:"views/admin/ad_createAdmin.html"}).state("orglist.adminlist",{url:"",templateUrl:"views/admin/ad_adminList.html"}).state("pass",{url:"/pass",templateUrl:"views/br_manager/change_password.html",controller:"passwordCtrl"}),d.html5Mode(!0),e.message="Processing ..."}]),appAdmin.controller("logoutCtrl",["$scope","$window",function(a,b){a.logout=function(){b.sessionStorage.removeItem("adminId"),b.location="index.html"}}]),appAdmin.directive("capitalizeFirst",["$parse",function(a){return{require:"ngModel",link:function(b,c,d,e){var f=function(a){var b=a.charAt(0).toUpperCase()+a.substring(1);return b!==a&&(e.$setViewValue(b),e.$render()),b},g=a(d.ngModel);e.$parsers.push(f),f(g(b))}}}]);